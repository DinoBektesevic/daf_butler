run: ingest
datastore:
  cls: lsst.daf.butler.datastores.posixDatastore.PosixDatastore
  root: ./butler_test_repository
  create: true
  storageClasses:
    StructuredDataDict:
      pytype: dict
      formatter: lsst.daf.butler.formatters.jsonFormatter.JsonFormatter
      # formatter: lsst.daf.butler.formatters.pickleFormatter.PickleFormatter
    StructuredDataList:
      pytype: list
      formatter: lsst.daf.butler.formatters.pickleFormatter.PickleFormatter
      # formatter: lsst.daf.butler.formatters.jsonFormatter.JsonFormatter
    StructuredData:
      # Data from a JSON or YAML file
      # type: dict
      pytype: examplePythonTypes.MetricsExample
      formatter: lsst.daf.butler.formatters.pickleFormatter.PickleFormatter
      components:
        # Components are those supported by get. We use the default formatter
        # though, and not the formatters associated with the components.
        summary: StructuredDataDict
        output: StructuredDataDict
        # Deliberately set this to the wrong type
        data: StructuredDataDict
    StructuredComposite:
      pytype: examplePythonTypes.MetricsExample
      assembler: lsst.daf.butler.core.composites.genericAssembler
      disassembler: lsst.daf.butler.core.composites.genericDisassembler
      components:
        summary: StructuredDataDict
        output: StructuredDataDict
        data: StructuredDataList
    TablePersistable:
      pytype: lsst.afw.table.io.persistable.Persistable
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    TablePersistableWcs:
      pytype: lsst.afw.image.wcs.wcs.Wcs
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    TablePersistablePsf:
      pytype: lsst.afw.detection.Psf
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    TablePersistableCoaddInputs:
      pytype: lsst.afw.image.coaddInputs.CoaddInputs
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    TablePersistableVisitInfo:
      pytype: lsst.afw.image.visitInfo.VisitInfo
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    TablePersistableApCorr:
      pytype: lsst.afw.image.apCorrMap.ApCorrMap
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    TablePersistableCalib:
      pytype: lsst.afw.image.calib.Calib
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    ImageF:
      pytype: lsst.afw.image.image.ImageF
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    MaskX:
      pytype: lsst.afw.image.mask.MaskX
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    Catalog:
      pytype: lsst.afw.table.BaseCatalog
    SourceCatalog:
      pytype: lsst.afw.table.SourceCatalog
      formatter: lsst.daf.butler.formatters.fitsCatalogFormatter.FitsCatalogFormatter
    Exposure: &Exposure
      pytype: lsst.afw.image.Exposure
      formatter: lsst.daf.butler.formatters.fitsExposureFormatter.FitsExposureFormatter
      components:
        image: ImageF
        mask: MaskX
        variance: ImageF
        wcs: TablePersistableWcs
        psf: TablePersistablePsf
        calib: TablePersistableCalib
        visitInfo: TablePersistableVisitInfo
        apCorrMap: TablePersistableApCorr
        coaddInputs: TablePersistableCoaddInputs
    ExposureF:
      <<: *Exposure
      pytype: lsst.afw.image.ExposureF
    ExposureI:
      <<: *Exposure
      pytype: lsst.afw.image.ExposureI
    ExposureComposite: &ExposureComposite
      <<: *Exposure
      assembler: lsst.daf.butler.core.composites.genericAssembler
      disassembler: lsst.daf.butler.assemblers.exposureAssembler.exposureDisassembler
    ExposureCompositeF:
      <<: *ExposureComposite
      pytype: lsst.afw.image.ExposureF
    ExposureI:
      <<: *ExposureComposite
      pytype: lsst.afw.image.ExposureI
registry:
  cls: lsst.daf.butler.registries.sqlRegistry.SqlRegistry
  dbname: 'sqlite:///:memory:'
  id: 0
